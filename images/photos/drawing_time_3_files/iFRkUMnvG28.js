if (self.CavalryLogger) { CavalryLogger.start_js(["GJSTr"]); }

__d("ActivityLogStory",["Event","Toggler","Run"],(function a(b,c,d,e,f,g){"use strict";var h={registerPopover:function i(j){var k=c("Event").listen(window,"scroll",function(l){c("Toggler").hide(j)});c("Run").onLeave(k.remove.bind(k))}};f.exports=h}),null);
__d("AllActivityContentLoader",["csx","Arbiter","CSS","DOM","DOMScroll","OnVisible","Parent","MorePagerFetchOnScroll","TimelineComponentKeys","TimelineConstants","TimelineController","TimelineLegacySections","TimelineSmartInsert","UIPagelet","Vector","$","clickRefAction"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=false,j=0,k=null,l={},m=[],n={},o=[],p=null;function q(u,v,w,x,y){this.node=u;this._canScrollLoad=true;this.scrubberKey=v;this._pageletLoadData=w;this.loaded=x;this.sortKey=y;this.contentNode=c("DOM").scry(u,"div._z6j")[0]}function r(){if(i)return;c("TimelineController").register(c("TimelineComponentKeys").CONTENT,t);c("clickRefAction")("scrubber").set_namespace("allactivity");i=true}function s(u){var v=c("TimelineLegacySections").get(u);v&&v._canScrollLoad&&v.load()}Object.assign(q.prototype,{load:function u(){__p&&__p();if(this.loaded)return;this.loaded=true;this.contentNode&&c("CSS").hide(this.contentNode);c("CSS").show(c("Parent").byClass(this.node,"fbTimelineSection"));var v=this.node;function w(y){c("TimelineSmartInsert").run(v,y)}var x=c("DOM").find(this.node,"div.fbTimelineLogStream");o.push(c("UIPagelet").loadFromEndpoint("TimelineEntStoryActivityLogPagelet",x.id,this._pageletLoadData,{usePipe:true,jsNonblock:true,constHeight:true,displayCallback:w,append:true}))},contentAdded:function u(v){if(!this.hasContent){c("CSS").removeClass(c("Parent").byClass(this.node,"stat_elem"),"async_saving");if(this.contentNode){v&&c("DOM").prependContent(this.contentNode,v);c("CSS").show(this.contentNode)}this.hasContent=true}},fullyLoaded:function u(){if(!this.hasContent){c("CSS").removeClass(c("Parent").byClass(this.node,"stat_elem"),"async_saving");c("CSS").show(c("DOM").find(this.node,"div._40pu"));this.contentNode&&c("CSS").hide(this.contentNode)}},activateScrollLoad:function u(){this._canScrollLoad=true;n[this.scrubberKey]&&n[this.scrubberKey].reset()},deactivateScrollLoad:function u(){if(!this.loaded)this._canScrollLoad=false;else{var v=c("DOM").scry(this.node,".uiMorePager");if(v)v.map(function(w){var x=c("MorePagerFetchOnScroll").getInstance(w.id);x&&x.removeEventListeners()})}n[this.scrubberKey]&&n[this.scrubberKey].remove()},getParent:function u(){if(this.parentKey)return c("TimelineLegacySections").get(this.parentKey);return null}});var t={SCROLL_TO_OFFSET:115,HEADER_SCROLL_CUTOFF:30,CURRENT_SECTION_OFFSET:150,registerTimePeriod:function u(v,w,x,y,z,A){__p&&__p();r();var B=new q(v,w,x,y,A);if(!z){m.push(w);l[w]=true}else{B.parentKey=z;c("TimelineLegacySections").get(z).subSections=c("TimelineLegacySections").get(z).subSections||[];c("TimelineLegacySections").get(z).subSections.push(B);c("TimelineLegacySections").get(z).subSections.sort(function(C,D){return D.sortKey-C.sortKey})}c("TimelineLegacySections").set(w,B);t.checkCurrentSectionChange();c("Arbiter").inform(c("TimelineConstants").SECTION_REGISTERED,{scrubberKey:w},c("Arbiter").BEHAVIOR_PERSISTENT)},reset:function u(){__p&&__p();t.stopLoadingContent();i=false;c("TimelineLegacySections").removeAll();j=0;k=null;l={};m=[];n={};o=[];p=null},stopLoadingContent:function u(){for(var v in n)n[v]&&n[v].remove();for(var w=0;w<o.length;w++)o[w].cancel()},setContentHeader:function u(v){p=v},checkCurrentSectionChange:function u(){__p&&__p();var v=t.getCurrentSection(),w=k&&k.scrubberKey;if(v&&v.scrubberKey!==w){k=v;var x=v.scrubberKey,y=v.parentKey;if(!y){y=x;x=null}c("TimelineController").sectionHasChanged(y,x)}},getCurrentSection:function u(){__p&&__p();var v={},w=c("TimelineLegacySections").getAll();for(var x in w){var y=w[x];if(!y.loaded)continue;var z=c("Vector").getElementPosition(y.node,"viewport").y;if(z<t.CURRENT_SECTION_OFFSET)v[z]=y}var A=Math.max.apply(this,Object.keys(v)),B=A==-Infinity;if(!B)return v[A];else return null},enableScrollLoad:function u(v,w,x){v=c("$")(v);var y=t.getNextSectionKey(w);if(y)n[y]=new(c("OnVisible"))(v,s.bind(null,y),false,x||1e3)},getNextSectionKey:function u(v){__p&&__p();var w=c("TimelineLegacySections").get(v),x=w.getParent();if(x)for(var y=0;y<x.subSections.length-1;y++)if(x.subSections[y].scrubberKey==v)return x.subSections[y+1].scrubberKey;for(var z=0;z<m.length-z;z++)if(m[z]==x.scrubberKey){var A=m[z+1];if(A){var B=c("TimelineLegacySections").get(A);if(B&&B.subSections){var C=B.subSections[0];if(C)return C.scrubberKey}}}return null},navigateToSection:function u(v,w,x){__p&&__p();w=!!w;var y=c("TimelineLegacySections").get(v);if(!y)return;if(!y.getParent()){v=y.subSections[0].scrubberKey;y=c("TimelineLegacySections").get(v)}for(var z=0;z<m.length;z++){var A=c("TimelineLegacySections").get(m[z]);for(var B=0;B<A.subSections.length;B++){if(A.subSections[B].scrubberKey==v)break;A.subSections[B].deactivateScrollLoad()}if(A.scrubberKey==y.getParent().scrubberKey)break}y.activateScrollLoad();y.load();t.adjustContentPadding();var C=c("Vector").getScrollPosition().x,D=c("Vector").getElementPosition(y.node).y;if(!w){var E=t.SCROLL_TO_OFFSET;c("DOMScroll").scrollTo(new(c("Vector"))(C,D-E,"document"))}},adjustContentPadding:function u(){c("$")("fbTimelineLogBody").style.paddingBottom=c("Vector").getViewportDimensions().y-t.CURRENT_SECTION_OFFSET-t.HEADER_SCROLL_CUTOFF+"px"},sectionHasContent:function u(v){var w=c("TimelineLegacySections").get(v);w&&w.contentAdded(p);p=null},sectionFullyLoaded:function u(v){var w=c("TimelineLegacySections").get(v);w&&w.fullyLoaded()}};f.exports=t}),null);
__d("ActivityLogSearch",["Event","CSS","DOM","Input","Run"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j,k){__p&&__p();var l=c("DOM").find(k,".inputtext"),m=c("Event").listen(j,"click",function(){c("CSS").hide(i);c("CSS").show(k);l.focus()});c("Run").onLeave(m.remove.bind(m));var n=c("Event").listen(l,"blur",function(){if(!c("Input").getValue(l)){c("CSS").hide(k);c("CSS").show(i)}});c("Run").onLeave(n.remove.bind(n))}f.exports=h}),null);
__d("PopoverMenuDynamicTooltip",["csx","DOMQuery","Tooltip"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(j){"use strict";this._popoverMenu=j;this._setMenuSubscription=null;this._changeSubscription=null}i.prototype.enable=function(){"use strict";this._setMenuSubscription=this._popoverMenu.subscribe("setMenu",this._onSetMenu.bind(this))};i.prototype.disable=function(){"use strict";this._popoverMenu.unsubscribe(this._setMenuSubscription);this._setMenuSubscription=null;this._removeChangeSubscription()};i.prototype._onSetMenu=function(){"use strict";__p&&__p();this._removeChangeSubscription();this._menu=this._popoverMenu.getMenu();this._changeSubscription=this._menu.subscribe("change",function(j,k){__p&&__p();var l=k.item;if(k[0])l=k[0].item;if(!l)return;var m=l.getLabel();m=m?m.toString():null;if(!m)return;var n=this._popoverMenu.getTriggerElem(),o=c("DOMQuery").scry(n,"span._55pe")[0];if(o&&o.nodeName){var p=o.parentNode;if(p)c("Tooltip").set(p,m)}}.bind(this))};i.prototype._removeChangeSubscription=function(){"use strict";if(this._changeSubscription){this._menu.unsubscribe(this._changeSubscription);this._changeSubscription=null}};f.exports=i}),null);
__d("ScrollHighlight",["DOMScroll","highlight"],(function a(b,c,d,e,f,g){var h={actOn:function i(j,k,l){c("DOMScroll").scrollTo(j,true,false,false,l);c("highlight")(j,null,k)}};f.exports=h}),null);
__d("ProfileApprovalController",["AsyncRequest","DOM","Event","HTML","$","ge"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this.queueType=i;var j=c("ge")("profileApprovalSeeMoreLink");if(j)c("Event").listen(j,"click",this.clickedSeeMore.bind(this))}h.prototype.getNewStories=function(){"use strict";var i=this.getStoryData(),j={filter:this.FILTER_NEWER,filter_timestamp:i.newest_time,filter_fbid:i.newest_fbid};new(c("AsyncRequest"))().setURI("/ajax/profile/approval/get_more.php").setData(j).setHandler(this.handleContent).send()};h.prototype.clickedSeeMore=function(){"use strict";var i=this.getStoryData(),j={queue_type:this.queueType,filter:this.FILTER_OLDER,filter_timestamp:i.oldest_time,filter_fbid:i.oldest_fbid};new(c("AsyncRequest"))().setURI("/ajax/profile/approval/get_more.php").setData(j).setHandler(this.handleContent).send()};h.prototype.handleContent=function(i){"use strict";__p&&__p();var j=i.payload;if(j.pager_error){c("DOM").replace(c("$")("profileApprovalSeeMoreContainer"),c("HTML")(j.pager_markup));return}if(j.hide_more_pager)c("DOM").remove(c("$")("profileApprovalSeeMoreContainer"));if(!j.items_markup)return;if(j.insert_before)c("DOM").prependContent(c("DOM").find(c("$")("profileApprovalContentContainer"),".profileApprovalList"),c("HTML")(j.items_markup));if(j.insert_after)c("DOM").appendContent(c("DOM").find(c("$")("profileApprovalContentContainer"),".profileApprovalList"),c("HTML")(j.items_markup))};h.prototype.getStoryData=function(){"use strict";var i=c("DOM").scry(c("$")("profileApprovalContentContainer"),".profileApprovalStoryContainer");if(!i)return;var j=i[0],k=i[i.length-1];return{newest_time:j.getAttribute("data-timestamp"),newest_fbid:j.getAttribute("data-fbid"),oldest_time:k.getAttribute("data-timestamp"),oldest_fbid:k.getAttribute("data-fbid")}};h.NO_MORE_CONTENT="no_more_content";Object.assign(h.prototype,{FILTER_NONE:0,FILTER_OLDER:1,FILTER_NEWER:2});f.exports=h}),null);
__d("legacy:profile-approval-controller",["ProfileApprovalController"],(function a(b,c,d,e,f,g){b.ProfileApprovalController=c("ProfileApprovalController")}),3);
__d("TimelineAllActivitySideNav",["csx","$","CSS","DOMQuery","DOM","FutureSideNav","PageTransitions","Scroll","Style","UIPagelet","ge","getOrCreateDOMID","getViewportDimensions"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(){var k=c("ge")("rightColContent"),l=k&&c("DOMQuery").scry(k,".fbTimelineLogScrubber")[0];l&&c("DOM").remove(l)}var j={init:function k(l,m,n,o,p){__p&&__p();var q=c("DOMQuery").find(c("$")("contentArea"),"._6-0"),r=c("getOrCreateDOMID")(q);c("Style").set(q,"minHeight",c("getViewportDimensions")().height+"px");c("CSS").addClass(l,"fixed_elem");c("PageTransitions").registerHandler(function(s){__p&&__p();var t;if(m===s.getPath()&&s.getQueryData().sk==n){var t=function(){var u=babelHelpers["extends"]({profile_id:o,renderContentsOnly:1,uripath:s.toString()},s.getQueryData()),v=c("FutureSideNav").getInstance(),w=v&&v._getItemForKey(u.log_filter||"all");w&&v.setLoading(w);i();c("UIPagelet").loadFromEndpoint("TimelineAllActivityColumn",r,u,{jsNonblock:true,constHeight:true,displayCallback:function x(y){y();w&&v.setSelected(w);c("Scroll").setTop(document.body,0);c("PageTransitions").transitionComplete(true)}});return{v:true}}();if(typeof t==="object")return t.v}return false})}};f.exports=j}),null);
__d("ApprovalQueueCountUpdater",["Arbiter","DOM","NavigationMessage","ge"],(function a(b,c,d,e,f,g){var h={updateCounts:function i(j,k,l){var m=j.friends+j.others,n=c("ge")("tag_count_friends"),o=c("ge")("tag_count_other");c("Arbiter").inform(c("NavigationMessage").NAVIGATION_COUNT_UPDATE,{key:"review",count:m<=l?m:l,hide:true});if(n)c("DOM").setContent(n,j.friends<=k?j.friends:k+"+");if(o)c("DOM").setContent(o,j.others<=k?j.others:k+"+")}};f.exports=h}),null);